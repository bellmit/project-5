<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"  layout:decorate="~{th/layout.html}"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>

    <script
            defer
            src="https://use.fontawesome.com/releases/v5.6.3/js/all.js"
            integrity="sha384-EIHISlAOj4zgYieurP0SdoiBYfGJKkgWedPHH4jCzpCXLmzVsw1ouK59MuUtP4a1"
            crossorigin="anonymous">
    </script>

    <title
        th:text="#{customerOrder.title}+ ' - DRS'" >
    </title>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2-bootstrap-theme/0.1.0-beta.10/select2-bootstrap.min.css" rel="stylesheet"/>

    <!-- <link href="<c:url value="/resources/css/dcp-self-served.css"/>" type="text/css" rel="stylesheet"> -->
    <script type='text/javascript' th:src="@{/resources/js/jquery.floatThead.js}"></script>

    <style>
#customerOrder td {
	vertical-align: top;
}

.label-pill {
	padding-right: .6em;
	padding-left: .6em;
	border-radius: 8rem;
	padding-top: 3px;
	padding-bottom: 3px;
}

.popover {
	min-width: 580px;
    max-width: 650px;
    border-radius: 6px;
    border: none;
    box-shadow: 0 0 6px 1px #eee;
}

.tDtl{
	background-color: #f7f7f7;
	padding: 2px;
	font-weight: bold;
}

.tDtlH{
	background-color: #f7f7f7; padding-top: 2px; padding-bottom: 2px; font-weight: bold;
}

</style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

    <script>

jQuery(window).on("load", function(e) {

    if ($('#isSearch').val() == 'true') {
	    $('#elasticSearch').prop('disabled', false);
	    $('.elasticSearch').show();
	    $('.filterSearch').hide();
	    $('.advancedSearch').hide();
	} else {
	    $('#elasticSearch').prop('disabled', true);
	    $('.elasticSearch').hide();
	    $('.filterSearch').show();
	}

	updateOrderDateTimeZoneText();

	var ListCustomerOrderCondition = [(${ListCustomerOrderCondition})]


	if (ListCustomerOrderCondition.supplierKcode == null) {

		$.ajax({
			type : 'get',
			url : '/CustomerOrderList/getProductSkuCodeToNameMap',
			contentType : "application/json; charset=utf-8",
			data : {
				productBaseCode : ListCustomerOrderCondition.relatedBaseProductCode,
			},
			dataType : "json",
			success : function(SKUs) {
				$('#SKU').empty();
				$('<option>').val("").text("All")
						.appendTo('#SKU');
				for ( var SKU in SKUs) {
					$('<option>').val(SKU).text(
							SKU + " " + SKUs[SKU])
							.appendTo('#SKU');
				}
				$('#SKU').val(ListCustomerOrderCondition.relatedSkuCode);

			}
		});

	} else {

		$.ajax({
			type : 'get',
			url : '/CustomerOrderList/getProductBaseCodeToNameMap',
			contentType : "application/json; charset=utf-8",
			data : {
				supplierKcode : ListCustomerOrderCondition.supplierKcode,
			},
			dataType : "json",
			success : function(baseProducts) {
				$('#baseProduct').empty();
				if (!$.isEmptyObject(baseProducts)) {
					$('<option>').val("").text(
							"All").appendTo(
							'#baseProduct');
				}
				for ( var baseProduct in baseProducts) {
					$('<option>')
							.val(baseProduct)
							.text(
									baseProduct
											+ " "
											+ baseProducts[baseProduct])
							.appendTo(
									'#baseProduct');
				}

				$('#baseProduct').val(ListCustomerOrderCondition.relatedBaseProductCode);

				$.ajax({
					type : 'get',
					url : '/CustomerOrderList/getProductSkuCodeToNameMap',
					contentType : "application/json; charset=utf-8",
					data : {
						productBaseCode : ListCustomerOrderCondition.relatedBaseProductCode,
					},
					dataType : "json",
					success : function(SKUs) {
						$('#SKU').empty();

						$('<option>')
								.val("")
								.text("All")
								.appendTo('#SKU');

						for ( var SKU in SKUs) {
							$('<option>')
								.val(SKU)
								.text(SKU + " " + SKUs[SKU])
								.appendTo('#SKU');
						}

						$('#SKU').val(ListCustomerOrderCondition.relatedSkuCode);
					}
				});
			}
		});
	}


});


$(document)
		.ready(
				function() {
					if($(window).width() >= 1024){
                        $('#customerOrder').floatThead({
                            scrollingTop : $("#s5_menu_wrap").height(),
                            zIndex : 100
                        });
                        $('#customerOrder').on(
                            "floatThead",
                            function(e, isFloated, $floatContainer) {
                                if (isFloated) {
                                    $floatContainer
                                            .addClass("table-floated");
                                } else {
                                    $floatContainer
                                            .removeClass("table-floated");
                                }
                            }
                        );
                    }
                    $( "#supplier" ).select2({
                        theme: "bootstrap"
                    });
					$('.select2').css("width", "100%");
					jQuery(
							"#orderDateStart,#orderDateEnd,#transactionDateStart,#transactionDateEnd")
							.datepicker(
									{
										beforeShow : function() {
											setTimeout(function() {
												$('.ui-datepicker').css(
														'z-index', 200);
											}, 0);
										},
										dateFormat : 'yy-mm-dd'
									}).keyup(function(e) {
									    if(e.keyCode == 8 || e.keyCode == 32 || e.keyCode == 46) {
									    	$(this).datepicker('setDate', null);
									    }
									});
					$(
							'#orderDateStart,#orderDateEnd,#transactionDateStart,#transactionDateEnd')
							.attr('readonly', true);
					$('[data-toggle="tooltip"]').tooltip();
					$('[data-toggle="popover"]')
							.popover(
									{html : true,title : function() {
											return $(this).parent().find(
													'div.poptitle').html();
										},
										container : 'body',
										trigger : 'focus',
										content : function() {
											var src = $(this).parent().find('div.pop');
											if ($(this).attr('data-salesChannel') != 'TrueToSource') {
												$.ajax({	type : 'get',
															url : '/CustomerOrderList/getAmazonOrderItemDetail',
															contentType : "application/json; charset=utf-8",
															data : {salesChannel : $(this).attr('data-salesChannel'),
															orderId : $(this).attr('data-orderId'),
																sku : $(this).attr('data-sku')
															},
															dataType : "json",
															async : false,
															success : function(
																	amazonOrderItemDetail) {
																src.find('[data-column="shippingMethod"]').html(
																				amazonOrderItemDetail.shippingMethod);
																src
																		.find('[data-column="shippingAddress"]')
																		.html(
																				amazonOrderItemDetail.shippingCity
																						+ ', '
																						+ amazonOrderItemDetail.shippingState
																						+ ', '
																						+ amazonOrderItemDetail.shippingCountry);
																src
																		.find(
																				'[data-column="salesTax"]')
																		.html(
																				amazonOrderItemDetail.saleTax);
																src
																		.find(
																				'[data-column="shippingPrice"]')
																		.html(
																				amazonOrderItemDetail.shippingPrice);
																src
																		.find(
																				'[data-column="shippingTax"]')
																		.html(
																				amazonOrderItemDetail.shippingTax);
																src
																		.find(
																				'[data-column="giftWrapPrice"]')
																		.html(
																				amazonOrderItemDetail.giftWrapPrice);
																src
																		.find(
																				'[data-column="giftWrapTax"]')
																		.html(
																				amazonOrderItemDetail.giftWrapTax);
																src
																		.find(
																				'[data-column="refundReason"]')
																		.html(
																				amazonOrderItemDetail.refundReason);
																src
																		.find(
																				'[data-column="RefundDetailedDisposition"]')
																		.html(
																				amazonOrderItemDetail.refundDetailedDisposition);
																src
																		.find(
																				'[id="fulfillmentService"]')
																		.hide();
																src
																		.find(
																				'[id="totalTax"]')
																		.hide();
															}
														});
											}
											if ($(this).attr(
													'data-salesChannel') == 'TrueToSource') {
												$
														.ajax({
															type : 'get',
															url : '/CustomerOrderList/getShopifyOrderItemDetail',
															contentType : "application/json; charset=utf-8",
															data : {
																orderId : $(
																		this)
																		.attr(
																				'data-orderId'),
																sku : $(
																		this)
																		.attr(
																				'data-sku')
															},
															dataType : "json",
															async : false,
															success : function(
																	shopifyOrderItemDetail) {
																console
																		.log(shopifyOrderItemDetail);
																src
																		.find(
																				'[data-column="shippingMethod"]')
																		.html(
																				shopifyOrderItemDetail.shippingMethod);
																src
																		.find(
																				'[data-column="shippingAddress"]')
																		.html(
																				shopifyOrderItemDetail.shippingCity
																						+ ', '
																						+ shopifyOrderItemDetail.shippingState
																						+ ', '
																						+ shopifyOrderItemDetail.shippingCountry);
																src
																		.find(
																				'[data-column="fulfillmentService"]')
																		.html(
																				shopifyOrderItemDetail.fulfillmentService);
																src
																		.find(
																				'[data-column="totalTax"]')
																		.html(
																				shopifyOrderItemDetail.tax);
																src
																		.find(
																				'[id="salesTax"]')
																		.hide();
																src
																		.find(
																				'[id="shippingPrice"]')
																		.hide();
																src
																		.find(
																				'[id="shippingTax"]')
																		.hide();
																src
																		.find(
																				'[id="giftWrapPrice"]')
																		.hide();
																src
																		.find(
																				'[id="giftWrapTax"]')
																		.hide();
															}
														});
											}
											return $(this).parent().find('div.pop').html();
										}
										//,
										//template : '<div class="popover" role="tooltip" style="width:600px;max-width:600px"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
									})

				});

	function resetByDRSStaff() {
		$(
				"#supplier,#amazonMerchantSKU,#asin,#salesChannel,#orderStatus,#orderDateStart,#orderDateEnd,#transactionDateStart,#transactionDateEnd,#marketplaceOrderId,#customerName,#buyerEmail,#promotionId")
				.val("");
		$('#baseProduct').empty();
		$('#SKU').empty();
		$('<option>').val("").text("All").appendTo('#baseProduct');
		$('<option>').val("").text("All").appendTo('#SKU');
	};

	function resetBySupplier() {
		$(
				"#baseProduct,#asin,#salesChannel,#orderStatus,#orderDateStart,#orderDateEnd,#transactionDateStart,#transactionDateEnd,#marketplaceOrderId,#customerName,#promotionId")
				.val("");
		$('#SKU').empty();
		$('<option>').val("").text("All").appendTo('#SKU');
	};

	function toggleFilterSearch() {
	    if ($('.filterSearch').is(':hidden')) {
	        $('#isSearch').val('false');
	        $('.elasticSearch').hide();
	        $('.filterSearch').show();
	    } else {
	        $('#isSearch').val('true');
	        $('.elasticSearch').show();
	        $('.filterSearch').hide();
	        $('.advancedSearch').hide();
	    }
		$('#customerOrder').floatThead('reflow');
	    $('#elasticSearch').prop('disabled', function(i, v) { return !v; });

	}


	function showForm() {
		var x = document.getElementById("adv_form");
		if (x.style.display === "flex") {
			x.style.display = "none";
			$('#customerOrder').floatThead('reflow');
		} else {
			x.style.display = "flex";
			$('#customerOrder').floatThead('reflow');
		}
	};


	function getBaseProducts() {
		$
			.ajax({
				type : 'get',
				url : '/CustomerOrderList/getProductBaseCodeToNameMap',
				contentType : "application/json; charset=utf-8",
				data : {
					supplierKcode : $("#supplier").val(),
				},
				dataType : "json",

				error : function(xhr) {
					$('#baseProduct').empty();
					$('#SKU').empty();
					$('<option>').val("").text("All").appendTo(
							'#baseProduct');
					$('<option>').val("").text("All").appendTo('#SKU');
				},

				success : function(baseProducts) {
					$('#baseProduct').empty();
					$('#SKU').empty();
					$('<option>').val("").text("All").appendTo('#SKU');

					if (!$.isEmptyObject(baseProducts)){
						$('<option>').val("").text("All").appendTo(
								'#baseProduct');
					}

					for ( var baseProduct in baseProducts) {
						$('<option>').val(baseProduct).text(
								baseProduct + " "
										+ baseProducts[baseProduct])
								.appendTo('#baseProduct');
					}
				}
			});
	};


	function getSKUs() {
		$
				.ajax({
					type : 'get',
					url : '/CustomerOrderList/getProductSkuCodeToNameMap',
					contentType : "application/json; charset=utf-8",
					data : {
						productBaseCode : $("#baseProduct").val(),
					},
					dataType : "json",
					success : function(SKUs) {
						$('#SKU').empty();
						$('<option>').val("").text("All").appendTo('#SKU');
						for ( var SKU in SKUs) {
							$('<option>').val(SKU).text(SKU + " " + SKUs[SKU])
									.appendTo('#SKU');
						}
					}
				});
	};

	var orderDateTimeZoneText = [];
	orderDateTimeZoneText['UTC'] = '[[#{customerOrder.orderDateTimeZoneTextUtc}]]';
	orderDateTimeZoneText['LOCAL'] = '[[#{customerOrder.orderDateTimeZoneTextLocal}]]';

	function updateOrderDateTimeZoneText() {
		var selectedSalesChannel = $("#salesChannel option:selected").text();
		if (selectedSalesChannel == "All"
				|| selectedSalesChannel == "Non-order") {
			$('#orderDateTimeZoneText').text(orderDateTimeZoneText['UTC']);
		} else {
			$('#orderDateTimeZoneText').text(orderDateTimeZoneText['LOCAL']);
		}
	}
</script>



    <style>
#adv_form {
	display: none;
}

</style>

</head>

<body>
<section layout:fragment="custom-content">

<div class="max-width">
    <div class="container-fluid">

        <div class="row">
            <div class="col-md-12">
                <div class="page-heading">
                    <a th:text="#{customerOrder.searchCustomerOrders}"></a>
                </div>
            </div>
        </div>

        <script>
        $(document).ready(function(){
        var customerOrderConditions = '[[${customerOrderConditions}]]';
        var customerOrderConditions = customerOrderConditions.replace(/{/g, "");
        var customerOrderConditions = customerOrderConditions.replace(/}/g, "");
        var customerOrderConditions = customerOrderConditions.replace(/, /g, "&");
        var customerOrderConditions = customerOrderConditions.replace(/,/g, "%2c");
        var customerOrderConditions = customerOrderConditions.replace(/null/g, "");
        $('#CustomerOrder').attr("action","/CustomerOrderList?"+customerOrderConditions);
        
    });
                                </script>
        <form id="CustomerOrder" method="GET"
                   name="CustomerOrder" class="form-horizontal text-left"  modelAttribute="CustomerOrder">

            <input type="hidden" th:id="isSearch" name="isSearch" th:value="${customerOrderConditions.isSearch}"/>
            <div class="row elasticSearch">
                <div class="col-md-12 elasticSearch"
                    th:text="#{customerOrder.elasticNote}">
                </div>
            </div>

            <div class="row filterSearch" style="display: none;">
                <div class="col-md-12">
                    <a th:text="#{customerOrder.note}"></a>
                </div>
            </div>

            <div class="row my-3" >
                <div class="col-md-6">
                    <div class="form-group elasticSearch">
                        <label for="searchTerms"><a th:text="#{customerOrder.elasticFields}"></a></label>
                        <input id="searchTerms" class="form-control" th:value="${customerOrderConditions.searchTerms}" name="searchTerms" type="text" />
                    </div>

                    <div sec:authorize="${hasAnyRole(@authProperties['CUSTOMER_ORDER_VIEW_DRS_STAFF'])}">
                        <div class="form-group filterSearch" style="display: none;">
                            <label for="supplier"><a th:text="#{customerOrder.supplier}"></a></label>
                            <select id="supplier" class="form-control" name="supplierKcode" onchange="getBaseProducts()">
                                <option value="">All</option>
                                <th:block th:each="supplierKcodeToNameMap : ${supplierKcodeToNameMap}">
                                    <option th:value="${supplierKcodeToNameMap.key}" th:selected="${supplierKcodeToNameMap.key} == ${customerOrderConditions.supplierKcode}"
                                            th:text="${supplierKcodeToNameMap.key}+' '+${supplierKcodeToNameMap.value}">
                                    </option>
                                </th:block>
                            </select>
                        </div>
                    </div>

                    <div class="form-group filterSearch" style="display: none;">
                        <label for="baseProduct"><a th:text="#{customerOrder.baseProduct}"></a></label>
                        <select id="baseProduct" class="form-control" name="relatedBaseProductCode" onchange="getSKUs()">
                            <option value="">All</option>
                            <th:block th:each="productBaseCodeToNameMap : ${productBaseCodeToNameMap}">
                                <option th:value="${productBaseCodeToNameMap.key}"
                                        th:text="${productBaseCodeToNameMap.key}+' '+${productBaseCodeToNameMap.value}">
                                </option>
                            </th:block>
                        </select>
                    </div>

                    <div class="form-group filterSearch" style="display: none;">
                        <label for="SKU"><a th:text="#{customerOrder.SKU}"></a></label>
                        <select id="SKU" class="form-control" name="relatedSkuCode">
                            <option value="">All</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="orderDateTimeZoneText"><a th:text="#{customerOrder.orderTime}"></a></label>
                        <div class="form-row">
                            <div class="col">
                                <input id="orderDateStart" class="form-control"
                                       style="display: inline;cursor:default;background-color: white;" th:value="${customerOrderConditions.orderDateStart}"
                                       name="orderDateStart" />
                            </div>
                            <div class="col-1 text-center">---</div>
                            <div class="col">
                                <input id="orderDateEnd" class="form-control"
                                       style="display: inline;cursor:default;background-color: white;" th:value="${customerOrderConditions.orderDateEnd}"
                                       name="orderDateEnd" />
                            </div>
                        </div>
                    </div>

                    <div class="form-group filterSearch" style="display: none;">
                        <label for="salesChannel"><a th:text="#{common.marketplace}"></a></label>
                        <select id="salesChannel" class="form-control" name="salesChannelId" onchange="updateOrderDateTimeZoneText()">
                            <option value="">All</option>
                            <th:block th:each="salesChannel : ${salesChannels}">
                                <option th:value="${salesChannel.key}" th:selected="${salesChannel.key} == ${customerOrderConditions.salesChannelId}"
                                        th:text="${salesChannel.displayName}">
                                </option>
                            </th:block>
                        </select>
                    </div>

                    <div class="form-group filterSearch" style="display: none;">
                        <label for="orderStatus"><a th:text="#{customerOrder.orderStatus}"></a></label>
                        <select id="orderStatus" class="form-control" name="orderStatus" th:value="${orderStatus}">
                            <option value="">All</option>
                            <option value="Canceled" th:selected="${customerOrderConditions.orderStatus} == 'Canceled'">Canceled</option>
                            <option value="Shipped" th:selected="${customerOrderConditions.orderStatus} == 'Shipped'">Shipped</option>
                            <option value="Pending" th:selected="${customerOrderConditions.orderStatus} == 'Pending'">Pending</option>
                            <option value="UNFULFILLABLE" th:selected="${customerOrderConditions.orderStatus} == 'UNFULFILLABLE'">UNFULFILLABLE</option>
                            <option value="COMPLETE_PARTIALLED" th:selected="${customerOrderConditions.orderStatus} == 'COMPLETE_PARTIALLED'">COMPLETE_PARTIALLED</option>
                            <option value="PROCESSING" th:selected="${customerOrderConditions.orderStatus} == 'PROCESSING'">PROCESSING</option>
                            <option value="COMPLETE" th:selected="${customerOrderConditions.orderStatus} == 'COMPLETE'">COMPLETE</option>
                            <option value="refunded" th:selected="${customerOrderConditions.orderStatus} == 'refunded'">refunded</option>
                            <option value="paid" th:selected="${customerOrderConditions.orderStatus} == 'paid'">paid</option>
                            <option value="partially_refunded" th:selected="${customerOrderConditions.orderStatus} == 'partially_refunded'">partially_refunded</option>
                        </select>
                    </div>

                </div>
            </div>
            <div class="row advancedSearch" id="adv_form">
                <div class="col-md-6">
                    <div sec:authorize="${hasAnyRole(@authProperties['CUSTOMER_ORDER_VIEW_DRS_STAFF'])}">
                        <div class="form-group">
                            <label for="amazonMerchantSKU"><a th:text="#{customerOrder.amazonMerchantSKU}"></a></label>
                            <input id="amazonMerchantSKU" class="form-control" name="amazonMerchantSKU" th:value="${customerOrderConditions.amazonMerchantSKU}"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="asin"><a th:text="#{customerOrder.asin}"></a></label>
                        <input id="asin" class="form-control" name="asin" th:value="${customerOrderConditions.asin}"/>
                    </div>
                    <div class="form-group">
                        <label for="transactionDateStart"><a th:text="#{customerOrder.transactionTimeUTC}"></a></label>
                        <div class="form-row">
                            <div class="col">
                                <input id="transactionDateStart" class="form-control"
                                       style="display: inline;cursor:default;background-color: white;" th:value="${customerOrderConditions.transactionDateStart}"
                                       name="transactionDateStart" />
                            </div>
                            <div class="col-1 text-center">---</div>
                            <div class="col">
                                <input id="transactionDateEnd" class="form-control"
                                       style="display: inline;cursor:default;background-color: white;" th:value="${customerOrderConditions.transactionDateEnd}"
                                       name="transactionDateEnd" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="marketplaceOrderId"><a th:text="#{customerOrder.marketplaceOrderId}"></a></label>
                        <input id="marketplaceOrderId" class="form-control" name="marketplaceOrderId" th:value="${customerOrderConditions.marketplaceOrderId}"/>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label for="customerName"><a th:text="#{customerOrder.customerName}"></a></label>
                        <input id="customerName" class="form-control" name="customerName" th:value="${customerOrderConditions.customerName}"/>
                    </div>
                    <div class="form-group">
                        <div sec:authorize="${hasAnyRole(@authProperties['CUSTOMER_ORDER_VIEW_DRS_STAFF'])}">
                            <label for="buyerEmail"><a th:text="#{customerOrder.buyerEmail}"></a></label>
                            <input id="buyerEmail" class="form-control" th:value="${customerOrderConditions.buyerEmail}" name="buyerEmail" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="customerName"><a th:text="#{customerOrder.promotionId}"></a></label>
                        <input id="promotionId" class="form-control" th:value="${customerOrderConditions.promotionId}" name="promotionId" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 text-right">

                    <button class="btn btn-primary elasticSearch" type="submit" th:formaction="@{/CustomerOrderList}">
                        <i class="fas fa-search"></i>
                        <a th:text="#{customerOrder.search}"></a>
                    </button>
                    <button class="btn btn-primary filterSearch" style="display: none;" type="submit" th:formaction="@{/CustomerOrderList}">
                        <i class="fas fa-filter"></i>
                        <a th:text="#{customerOrder.submit}"></a>
                    </button>

                    <a sec:authorize="${hasAnyRole(@authProperties['CUSTOMER_ORDER_VIEW_DRS_STAFF'])}">
                        <button type="button" class="btn btn-default filterSearch" style="display: none;"
                                onclick="resetByDRSStaff()">
                            <a th:text="#{customerOrder.clear}"></a>
                        </button>
                    </a>
                    <a sec:authorize="${hasAnyRole(@authProperties['CUSTOMER_ORDER_VIEW_SUPPLIER'])}">
                        <button type="button" class="btn btn-default filterSearch" style="display: none;"
                                onclick="resetBySupplier()">
                            <a th:text="#{customerOrder.clear}"></a>
                        </button>
                    </a>
                    <button id="show_button" type="button" class="btn btn-default filterSearch" style="display: none;"
                            onclick="showForm()">
                        <a th:text="#{customerOrder.advanced}"></a>
                    </button>
                    <input id="orderExport" class="btn btn-success filterSearch" style="display: none;" type="button" th:value="#{customerOrder.export}">
                    <script>
						$("#orderExport").click( function(e) {
									e.preventDefault();
									var urlParams = $("#CustomerOrder").serializeArray();
                                    
									var paramString = "";
									for (i = 0; i < urlParams.length; i++) {
										if (i == 0) {
											var param = "?"
													+ urlParams[i]["name"]
													+ "="
													+ urlParams[i]["value"];
										} else {
											var param = "&"
													+ urlParams[i]["name"]
													+ "="
													+ urlParams[i]["value"];
										}
										paramString += param;
									}
                                    
									$('#orderIframe').attr('src',
											"/CustomerOrderList/export"+ paramString);
								});
					</script>
                    <iframe id="orderIframe" style="border: none; height: 0; width: 0;"></iframe>

                    <button id="toggleSearch" type="button" class="btn btn-default elasticSearch" style="display: none;"
                            onclick="toggleFilterSearch()"
                            th:text="#{customerOrder.filter}">
                    </button>

                    <button id="toggleSearch" type="button" class="btn btn-default filterSearch" style="display: none;"
                            onclick="toggleFilterSearch()">
                        <i class="fas fa-backward"></i>
                    </button>

                </div>
            </div>

        </form>

        <div id="customerOrderResultTitle" class="row">
            <div class="col-md-12">
                <div class="page-heading"><a th:text="${searchResultTitle}"></a></div>
                <div th:if="${customerOrders.size() != 0}">
                    <span> <a th:text="#{customerOrder.pageInfo(${startCountPerPage},${endCountPerPage})}"></a>
                        <a th:if="${totalPages > 1}"
                             th:text="#{customerOrder.pageInfoTotal(${totalRecords})}">
                        </a>
					</span>
                </div>
            </div>
        </div>
        <div id="customerOrderResult" class="row">
            <div class="col-md-12">
                <div id="pager">
                    <div th:if="${totalPages > 1}">
                                <th:block th:each="customerOrderCondition : ${customerOrderConditions}">
                                    <script>
                                $(document).ready(function(){
                                var totalPages = parseInt('[[${totalPages}]]');
                                var currentPageIndex = parseInt('[[${currentPageIndex}]]');

                                var customerOrderConditions = '[[${customerOrderConditions}]]';
                                var customerOrderConditions = customerOrderConditions.replace(/{/g, "");
                                var customerOrderConditions = customerOrderConditions.replace(/}/g, "");
                                var customerOrderConditions = customerOrderConditions.replace(/, /g, "&");
                                var customerOrderConditions = customerOrderConditions.replace(/,/g, "%2c");
                                var customerOrderConditions = customerOrderConditions.replace(/null/g, "");



                                if(totalPages > 500){

                                if(currentPageIndex == 1){
                                $('.nextUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex+1));
                                $('.lastUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=500");
                                }

                                else if(currentPageIndex == totalPages){
                                $('.firstUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=1");
                                $('.prevUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex-1));
                                }

                               else{
                                $('.firstUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=1");
                                $('.lastUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=500");
                                $('.prevUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex-1));
                                $('.nextUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex+1));
                                }
                                }

                                else{

                                if(currentPageIndex == 1){
                                $('.nextUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex+1));
                                $('.lastUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+totalPages);
                                }

                                else if(currentPageIndex == totalPages){
                                $('.firstUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=1");
                                $('.prevUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex-1));
                                }

                               else{
                                $('.firstUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=1");
                                $('.lastUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+totalPages);
                                $('.prevUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex-1));
                                $('.nextUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex+1));
                                }
                                }

                                });
                                </script>
                                </th:block>
                            <div class="text-center">
                                <nav>
                                    <ul class="pagination pagination-sm justify-content-center">
                                        <div th:if="${currentPageIndex != 1}" style="display: flex;">
                                                <li class="page-item"><a class="page-link firstUrl" data-pager="1">&lt;&lt;</a></li>
                                                <li class="page-item"><a class="page-link prevUrl" th:data-pager="${currentPageIndex - 1}">&lt;</a></li>
                                        </div>

                                        <th:block th:each="i : ${#numbers.sequence(startPage, endPage)}">
                                            <script>
                                        $(document).ready(function(){
                                        var totalPages = parseInt('[[${totalPages}]]');
                                        var currentPageIndex = parseInt('[[${currentPageIndex}]]');

                                        var customerOrderConditions = '[[${customerOrderConditions}]]';
                                        var customerOrderConditions = customerOrderConditions.replace(/{/g, "");
                                        var customerOrderConditions = customerOrderConditions.replace(/}/g, "");
                                        var customerOrderConditions = customerOrderConditions.replace(/, /g, "&");
                                        var customerOrderConditions = customerOrderConditions.replace(/,/g, "%2c");
                                        var customerOrderConditions = customerOrderConditions.replace(/null/g, "");
                                        var i = '[[${i}]]';

                                        $('#pl'+i).attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+i);

                                        });

                                        </script>

                                            <div th:if="${i == currentPageIndex}">
                                                <li class="active page-item"><a th:id="'pl'+${i}" class="page-link" th:data-pager="${i}" th:text="${i}"></a></li>
                                            </div>
                                            <div th:unless="${i == currentPageIndex}">
                                                <li class="page-item"><a th:id="'pl'+${i}" class="page-link" th:data-pager="${i}" th:text="${i}"></a></li>
                                            </div>
                                        </th:block>

                                        <div th:if="${totalPages <= 500}">
                                            <div th:if="${currentPageIndex != totalPages}" style="display: flex;">
                                                <li class="page-item"><a class="page-link nextUrl" th:data-pager="${currentPageIndex + 1}">&gt;</a></li>
                                                <li class="page-item"><a class="page-link lastUrl" th:data-pager="${totalPages}">&gt;&gt;</a></li>
                                            </div>
                                        </div>
                                        <div th:unless="${totalPages <= 500}">
                                            <div th:if="${currentPageIndex != 500}" style="display: flex;">
                                                <li class="page-item"><a class="page-link nextUrl" th:data-pager="${currentPageIndex + 1}">&gt;</a></li>
                                                <li class="page-item"><a class="page-link lastUrl" th:data-pager="${totalPages}">&gt;&gt;</a></li>
                                            </div>
                                        </div>

                                    </ul>
                                </nav>
                            </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table id="customerOrder" class="table table-striped table-floated">
                        <thead id="tableHeader">
                        <tr style="height: 50px;">
                            <th style="vertical-align: bottom; width: 135px;"><a th:text="#{customerOrder.orderTimeLocal}"></a></th>
                            <th style="vertical-align: bottom; width: 135px;"><a th:text="#{customerOrder.orderTimeUTC}"></a></th>
                            <th style="vertical-align: bottom; width: 135px;"><a th:text="#{customerOrder.transactionTimeUTC}"></a></th>
                            <th style="vertical-align: bottom;"><a th:text="#{customerOrder.marketplaceOrderId}"></a> <br> <a th:text="#{customerOrder.buyer}"></a></th>
                            <th style="vertical-align: bottom; width: 265px;"><a th:text="#{customerOrder.SKUCode}"></a> <br> <a th:text="#{customerOrder.productName}"></a></th>
                            <th style="vertical-align: bottom;"><a th:text="#{customerOrder.orderStatus}"></a></th>
                            <th style="vertical-align: bottom; width: 190px;"><a th:text="#{common.marketplace}"></a> <br> <a th:text="#{customerOrder.promotionId}"></a></th>
                            <th class="text-left" style="vertical-align: bottom;"><a th:text="#{customerOrder.fulfillmentCenter}"></a></th>
                            <th class="text-right" style="vertical-align: bottom;"><a th:text="#{customerOrder.qty}"></a></th>
                            <th class="text-right" style="vertical-align: bottom;"><a th:text="#{customerOrder.actualRetailPrice}"></a></th>
                        </tr>
                        </thead>
                        <tbody>
                        <th:block th:each="customerOrder , orderCount : ${customerOrders}">

                            <div th:if="${customerOrder.orderStatus == 'Pending' || customerOrder.orderStatus == 'Canceled'}">
                                <tr class="text-muted">
                            </div>
                            <div th:unless="${customerOrder.orderStatus == 'Pending' || customerOrder.orderStatus == 'Canceled'}">
                                    <tr>
                            </div>
                            <td th:text="${customerOrder.orderTimeLocal}"></td>
                            <td th:text="${customerOrder.orderTimeUTC}"></td>
                            <td th:text="${customerOrder.transactionTimeUTC}"></td>
                            <td>

                                <div th:if="${customerOrder.salesChannel == null || customerOrder.salesChannel == 'eBay'}">
                                        <a th:text="${customerOrder.marketplaceOrderId}"></a>
                                </div>
                                <a th:unless="${customerOrder.salesChannel == null || customerOrder.salesChannel == 'eBay'}">
                                        <a th:id="'orderCount'+${orderCount.index}"
                                           th:tabindex="${orderCount.index}" class="popTrigger"
                                           data-toggle="popover"
                                           style="text-decoration: none; cursor: pointer;"
                                           th:data-salesChannel="${customerOrder.salesChannel}"
                                           th:data-orderId="${customerOrder.marketplaceOrderId}"
                                           th:data-sku="${customerOrder.SKUCode}" th:text="${customerOrder.marketplaceOrderId}"></a>
                                </a>
                                <br><a th:text="${customerOrder.buyer}"></a>
                                <div class="poptitle" style="display: none;">
                                    <b th:text="${customerOrder.SKUCode}+' '+${customerOrder.productName}+' on '+${customerOrder.salesChannel}"></b>
                                </div>
                                <div id="test" class="pop" style="display: none;">
                                    <div class="row">
                                        <div class="col-md-12"></div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-right">Order ID</div>
                                        <div class="col-md-6 text-left" th:text="${customerOrder.marketplaceOrderId}"></div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-right">Purchase date</div>
                                        <div class="col-md-6 text-left" th:text="${#strings.substring(customerOrder.orderTimeUTC,0,10)}"></div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-right">Order Status</div>
                                        <div th:if="${customerOrder.orderStatus == 'Refunded'}"
                                             class="col-md-6 text-left" style="color: #cc0000;"
                                             th:text="${customerOrder.orderStatus}"><br>
                                            <span
                                                    data-column="refundReason"></span>,
                                            <span
                                                    data-column="RefundDetailedDisposition"></span>
                                        </div>
                                        <div th:unless="${customerOrder.orderStatus == 'Refunded'}"
                                             class="col-md-6 text-left"
                                             th:text="${customerOrder.orderStatus}">
                                        </div>

                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 text-right">Shipping Service</div>
                                        <div class="col-md-6 text-left" data-column="shippingMethod"></div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 text-right">Customer Name</div>
                                        <div class="col-md-6 text-left"><a th:text="${customerOrder.buyer}"></a></div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 text-right">Ship to</div>
                                        <div class="col-md-6 text-left" data-column="shippingAddress"></div>
                                    </div>

                                    <div th:if="${customerOrder.promotionId != null}">
                                        <div class="row">
                                            <div class="col-md-6 text-right">Promotion / Rebates</div>
                                            <div class="col-md-6 text-left"><a th:text="${customerOrder.promotionId}"></a></div>
                                        </div>
                                    </div>
                                    <div id="fulfillmentService" class="row">
                                        <div class="col-md-6 text-right">Fulfillment Service /
                                            ID</div>
                                        <div class="col-md-6 text-left"
                                             data-column="fulfillmentService"></div>
                                    </div>

                                    <br />

                                    <div class="row">
                                        <div class="col-md-12 text-center tDtl">Transaction Details</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-2 text-right tDtlH">Quantity</div>
                                        <div class="col-md-2 text-right tDtlH">Unit
                                            Price</div>
                                        <div class="col-md-4 text-center tDtlH">&nbsp;</div>
                                        <div class="col-md-2 text-right tDtlH">Order</div>
                                        <div class="col-md-2 text-right tDtlH">
                                            <div th:if="${customerOrder.orderStatus == 'Refunded'}">
                                                    &nbsp;
                                            </div>
                                            <div th:unless="${customerOrder.orderStatus == 'Refunded'}">
                                                    &nbsp;
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-bottom: 10px"></div>
                                    <div class="row">
                                        <div class="col-md-2 text-right"><a th:text="${customerOrder.qty}"></a></div>
                                        <div class="col-md-2 text-right">
                                            <div th:if="${customerOrder.itemPrice != '' && customerOrder.qty != '' && customerOrder.qty !=  '0'}">
                                                <div th:with="unitprice=${customerOrder.itemPrice}/${customerOrder.qty}">
                                                    <a th:text="${#numbers.formatDecimal(unitprice,0,2)}"></a>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-md-4 text-right">Total product charges</div>
                                        <div class="col-md-2 text-right"><a th:text="${customerOrder.actualRetailPrice}"></a></div>
                                        <div class="col-md-2 text-right">&nbsp;</div>
                                    </div>
                                    <div id="salesTax" class="row">
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-4 text-right">Sales tax</div>
                                        <div class="col-md-2 text-right" data-column="salesTax"></div>
                                        <div class="col-md-2 text-right">&nbsp;</div>
                                    </div>
                                    <div id="shippingPrice" class="row">
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-4 text-right">Shipping price</div>
                                        <div class="col-md-2 text-right" data-column="shippingPrice"></div>
                                        <div class="col-md-2 text-right">&nbsp;</div>
                                    </div>
                                    <div id="shippingTax" class="row">
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-4 text-right">Shipping tax</div>
                                        <div class="col-md-2 text-right" data-column="shippingTax"></div>
                                        <div class="col-md-2 text-right">&nbsp;</div>
                                    </div>
                                    <div id="giftWrapPrice" class="row">
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-4 text-right">Gift wrap price</div>
                                        <div class="col-md-2 text-right" data-column="giftWrapPrice"></div>
                                        <div class="col-md-2 text-right">&nbsp;</div>
                                    </div>
                                    <div id="giftWrapTax" class="row">
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-4 text-right">Gift wrap tax</div>
                                        <div class="col-md-2 text-right" data-column="giftWrapTax"></div>
                                        <div class="col-md-2 text-right">&nbsp;</div>
                                    </div>
                                    <div id="totalTax" class="row">
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-2 text-right"></div>
                                        <div class="col-md-4 text-right">Total tax</div>
                                        <div class="col-md-2 text-right" data-column="totalTax"></div>
                                        <div class="col-md-2 text-right">&nbsp;</div>
                                    </div>
                                </div>

                            </td>
                            <td style="white-space: nowrap; max-width: 200px;"><a th:text="${customerOrder.SKUCode}"></a>
                                <br>
                                <div th:if="${customerOrder.productName != null && customerOrder.productName != ''}">
                                    <div th:if="${(#strings.length(customerOrder.productName)) > 40}">
                                        <div th:with="shortProductName=${#strings.substring(customerOrder.productName,0,39)}">
                                            <span th:title="${customerOrder.productName}" data-toggle="tooltip"><a th:text="${shortProductName}+'...'"></a></span>
                                        </div>
                                    </div>

                                    <div th:if="${(#strings.length(customerOrder.productName)) <= 40}">
                                        <a th:text="${customerOrder.productName}"></a>
                                    </div>
                                </div>

                            </td>

                            <div th:if="${customerOrder.orderStatus == 'Refunded'}">
                                    <td style="color: #ff6600;"><a th:text="${customerOrder.orderStatus}"></a></td>
                            </div>

                            <div th:unless="${customerOrder.orderStatus == 'Refunded'}">
                                    <td><a th:text="${customerOrder.orderStatus}"></a></td>
                            </div>

                            <td style="white-space: nowrap; max-width: 175px;">
                                <a sec:authorize="${hasAnyRole(@authProperties['CUSTOMER_ORDER_VIEW_DRS_STAFF'])}">

                                    <a th:switch="${customerOrder.salesChannel}">
                                        <a th:case="'TrueToSource'">
                                            <a
                                                    th:href="@{{marketplaceToOrderUrlPrefixMap}{shopifyOrderId}(marketplaceToOrderUrlPrefixMap=${marketplaceToOrderUrlPrefixMap['__${customerOrder.salesChannel}__']},shopifyOrderId=${customerOrder.shopifyOrderId})}"
                                                    target="_blank" th:text="${customerOrder.salesChannel}"></a>
                                        </a>
                                        <a th:case="'eBay'">
                                            <a th:text="${customerOrder.salesChannel}"></a>
                                        </a>
                                        <a th:case="*">
                                            <a
                                                    th:href="@{{marketplaceToOrderUrlPrefixMap}{marketplaceOrderId}(marketplaceToOrderUrlPrefixMap=${marketplaceToOrderUrlPrefixMap['__${customerOrder.salesChannel}__']},marketplaceOrderId=${customerOrder.marketplaceOrderId})}"
                                                    target="_blank" th:text="${customerOrder.salesChannel}"></a>
                                        </a>
                                    </a>

                                </a>

                                <div sec:authorize="${hasAnyRole(@authProperties['CUSTOMER_ORDER_VIEW_SUPPLIER'])}">
                                <a th:text="${customerOrder.salesChannel}"></a>
                                </div>
                                <br>

                                <div th:if="${customerOrder.promotionId != null && customerOrder.promotionId != ''}">
                                    <div th:if="${(#strings.length(customerOrder.promotionId)) > 30}">
                                        <div th:with="shortPromotionId=${#strings.substring(customerOrder.promotionId,0,29)}">
                                            <span th:title="${customerOrder.promotionId}" data-toggle="tooltip"><a th:text="${shortPromotionId }+'...'"></a></span>
                                        </div>
                                    </div>

                                    <div th:if="${(#strings.length(customerOrder.promotionId)) <= 30}">
                                        <a th:text="${customerOrder.promotionId}"></a>
                                    </div>
                                </div>
                            </td>

                            <td th:text="${customerOrder.fulfillmentCenter}"></td>
                            <td class="text-right"><a th:text="${customerOrder.qty}"></a></td>
                            <td class="text-right"><a th:text="${customerOrder.actualRetailPrice}"></a></td>
                        </th:block>
                        </tbody>
                    </table>
                </div>
                <div id="customerOrderResult" class="row">
                    <div class="col-md-12">
                        <div id="pager">
                            <div th:if="${totalPages > 1}">
                                <th:block th:each="customerOrderCondition : ${customerOrderConditions}">
                                    <script>
                                $(document).ready(function(){
                                var totalPages = parseInt('[[${totalPages}]]');
                                var currentPageIndex = parseInt('[[${currentPageIndex}]]');

                                var customerOrderConditions = '[[${customerOrderConditions}]]';
                                var customerOrderConditions = customerOrderConditions.replace(/{/g, "");
                                var customerOrderConditions = customerOrderConditions.replace(/}/g, "");
                                var customerOrderConditions = customerOrderConditions.replace(/, /g, "&");
                                var customerOrderConditions = customerOrderConditions.replace(/,/g, "%2c");
                                var customerOrderConditions = customerOrderConditions.replace(/null/g, "");

                                if(totalPages > 500){

                                if(currentPageIndex == 1){
                                $('.nextUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex+1));
                                $('.lastUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=500");
                                }

                                else if(currentPageIndex == totalPages){
                                $('.firstUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=1");
                                $('.prevUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex-1));
                                }

                               else{
                                $('.firstUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=1");
                                $('.lastUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=500");
                                $('.prevUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex-1));
                                $('.nextUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex+1));
                                }
                                }

                                else{

                                if(currentPageIndex == 1){
                                $('.nextUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex+1));
                                $('.lastUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+totalPages);
                                }

                                else if(currentPageIndex == totalPages){
                                $('.firstUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=1");
                                $('.prevUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex-1));
                                }

                               else{
                                $('.firstUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page=1");
                                $('.lastUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+totalPages);
                                $('.prevUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex-1));
                                $('.nextUrl').attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+(currentPageIndex+1));
                                }
                                }



                                });
                                </script>
                                </th:block>
                                <div class="text-center">
                                    <nav>
                                        <ul class="pagination pagination-sm justify-content-center">
                                            <div th:if="${currentPageIndex != 1}" style="display: flex;">
                                                <li class="page-item"><a class="page-link firstUrl" data-pager="1">&lt;&lt;</a></li>
                                                <li class="page-item"><a class="page-link prevUrl" th:data-pager="${currentPageIndex - 1}">&lt;</a></li>
                                            </div>

                                            <th:block th:each="i : ${#numbers.sequence(startPage, endPage)}">
                                                <script>
                                        $(document).ready(function(){
                                        var totalPages = parseInt('[[${totalPages}]]');
                                        var currentPageIndex = parseInt('[[${currentPageIndex}]]');

                                        var customerOrderConditions = '[[${customerOrderConditions}]]';
                                        var customerOrderConditions = customerOrderConditions.replace(/{/g, "");
                                        var customerOrderConditions = customerOrderConditions.replace(/}/g, "");
                                        var customerOrderConditions = customerOrderConditions.replace(/, /g, "&");
                                        var customerOrderConditions = customerOrderConditions.replace(/,/g, "%2c");
                                        var customerOrderConditions = customerOrderConditions.replace(/null/g, "");
                                        var i = '[[${i}]]';

                                        $('#pbelow'+i).attr("href","/CustomerOrderList?"+(customerOrderConditions)+"&page="+i);

                                        });

                                        </script>

                                                <div th:if="${i == currentPageIndex}">
                                                    <li class="active page-item"><a th:id="'pbelow'+${i}" class="page-link" th:data-pager="${i}" th:text="${i}"></a></li>
                                                </div>
                                                <div th:unless="${i == currentPageIndex}">
                                                    <li class="page-item"><a th:id="'pbelow'+${i}" class="page-link" th:data-pager="${i}" th:text="${i}"></a></li>
                                                </div>
                                            </th:block>

                                            <div th:if="${currentPageIndex != totalPages}" style="display: flex;">
                                                <li class="page-item"><a class="page-link nextUrl" th:data-pager="${currentPageIndex + 1}">&gt;</a></li>
                                                <li class="page-item"><a class="page-link lastUrl" th:data-pager="${totalPages}">&gt;&gt;</a></li>
                                            </div>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div th:if="${customerOrders.size() != 0}">
                                    <span> <a th:text="#{customerOrder.pageInfo(${startCountPerPage},${endCountPerPage})}"></a>
                                        <a th:if="${totalPages > 1}"
                                             th:text="#{customerOrder.pageInfoTotal(${totalRecords})}">
                                        </a>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</section>
</body>
</html>